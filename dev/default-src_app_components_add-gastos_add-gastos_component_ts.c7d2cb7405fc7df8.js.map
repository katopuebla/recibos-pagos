{"version":3,"file":"default-src_app_components_add-gastos_add-gastos_component_ts.c7d2cb7405fc7df8.js","mappings":"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","sources":["./src/app/components/add-gastos/add-gastos.component.ts","./src/app/components/add-gastos/add-gastos.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  ModalController,\n  LoadingController,\n  ActionSheetController,\n} from '@ionic/angular';\nimport { CategoriaDef, Concepto, Gastos, GastosDetalle } from '../../interface/gastos';\nimport { GastosService } from '../../service/gastos.service';\nimport { LoadingUtil } from '../../utils/loadingUtil';\nimport { ToastUtil } from 'src/app/utils/toastUtil';\n\n@Component({\n  selector: 'app-add-gastos',\n  templateUrl: 'add-gastos.component.html',\n  styleUrls: ['add-gastos.component.css'],\n  standalone: false,\n})\nexport class AddGastosComponent extends LoadingUtil implements OnInit {\n  gasto: Gastos = {};\n  gastoDetalle: GastosDetalle = {};\n  gastoDetalles: GastosDetalle [] = [];\n  conceptos: Concepto[] = [];\n  categorias: CategoriaDef[] = [];\n  date = new Date(); // Or the date you'd like converted.\n  today = new Date(\n    this.date.getTime() - this.date.getTimezoneOffset() * 60000\n  );\n  gastosConfirm: GastosDetalle[] = [];\n\n  public fields: FormGroup;\n\n  constructor(\n    public modalCtrl: ModalController,\n    private actionSheet: ActionSheetController,\n    private formBuilder: FormBuilder,\n    private service: GastosService,\n    loadingCtrl: LoadingController,\n    private toastCtrl: ToastUtil\n  ) {\n    super(loadingCtrl);\n    this.fields = this.formBuilder.group({\n      categoria: ['', Validators.required],\n      nombre: ['', Validators.required],\n      fecha: ['', Validators.required],\n      monto: ['', Validators.required],\n      comentario: [''],\n      conceptos: this.formBuilder.array([this.frmConceptos()])\n    });\n  }\n\n  frmConceptos(): FormGroup {\n    return this.formBuilder.group({\n      // concepto: ['', Validators.required],\n      mes: ['', Validators.required],\n      monto: ['', Validators.required],\n      comentario: ['']\n    });\n  }\n\n  get conceptoForm() {\n    return this.fields.get('conceptos') as FormArray;\n  }\n\n  logForm() {\n    console.log(this.fields.value);\n  }\n  ngOnInit() {\n    this.service.getSpreadSheetId().then(() => this.initCategorias());\n    const formattedDate = this.today.toJSON().split('T')[0];\n    this.fields.patchValue({ fecha: formattedDate });\n  }\n\n  initCategorias() {\n    this.showing();\n    this.service.getCategoriaDef().subscribe((resp: CategoriaDef[]) => {\n      this.categorias = resp || [];\n      this.dismiss();\n    });\n  }\n\n  onChange(event: CustomEvent) {\n    const _categoria: CategoriaDef = event.detail.value;\n    if (_categoria) {\n      let categoria: CategoriaDef;\n      categoria = this.categorias && this.categorias.find((data) => data.Nombre === _categoria.Nombre) || {} as CategoriaDef;\n      this.fields.patchValue({ nombre: categoria.PersonaServicio });\n    }\n  }\n\n    onChangeMonto(event: CustomEvent, i: number) {\n      const _monto: number = event.detail.value;\n      if (_monto) {\n        const control = <FormArray>this.fields.controls['conceptos'];\n        const newMonto = _monto - control.at(i).value.monto;\n        // const formattedDate = this.today.toJSON().split('T')[0];\n        const formattedDate = this.fields.value.fecha;\n        const _comentario = this.fields.value.comentario;\n        control.at(i).patchValue({\n          mes: formattedDate,\n          monto: _monto,\n          comentario: _comentario\n        });\n      }\n    }\n\n  async onSave(_gasto: any) {\n    const actionSheet = await this.actionSheet.create({\n      header: '¿Desea guardar el gasto?',\n      buttons: [\n        {\n          text: 'Guardar',\n          icon: 'save',\n          handler: () => {\n            this.save(_gasto);\n          },\n        },\n        {\n          text: 'Cancelar',\n          icon: 'close',\n          role: 'cancel',\n        },\n      ],\n  });\n    await actionSheet.present();\n}\n\n  save(_gasto: any) {\n    let fecha = new Date(this.gasto.Fecha || this.today);\n    this.gasto.Fecha = fecha.toLocaleString('es-MX', {\n      timeZone: 'America/Mexico_City'\n    });\n    this.fillEvent(_gasto);\n    this.service.save(this.gasto, this.gastoDetalles).subscribe({\n      next: (resp) => {\n        this.meesageToast('Se guardo exitosamente');\n        this.dismiss();\n        // this.confirm(this.gastoDetalles);\n        this.calOther(this.gastoDetalles);\n      },\n      error: (err) => {\n        this.meesageToast('No se pudo guardar el dato');\n        console.log('Error: ', err);\n        this.dismiss();\n      }\n    });\n    this.showing();\n  }\n\n    fillEvent(_gasto: any) {\n      // console.log(\"fillEvent\", _gasto);\n      this.gasto.Categoria = _gasto.categoria.Nombre;\n      this.gasto.Fecha = _gasto.fecha;\n      this.gasto.Nombre = _gasto.nombre;\n      this.gasto.Monto = _gasto.monto;\n      this.gasto.Comentario = _gasto.comentario;\n      // console.log(\"this.gastos\", this.gastos);\n      var conceptos = _gasto.conceptos;\n          this.gastoDetalles = [];\n          if (conceptos) {\n            conceptos.forEach((data: Concepto) => {\n            var detail: GastosDetalle = {};\n            detail.Categoria = _gasto.categoria.Nombre;\n            detail.Fecha = data.mes;\n            detail.Nombre = _gasto.nombre;\n            detail.Monto = data.monto;\n            detail.Comentario = data.comentario;\n              //console.log(\"detail\", detail);\n              this.gastoDetalles.push(detail);\n            });\n          }\n    }\n\n\n    async calOther(_gastosDetalle: any) {\n      const actionSheet = await this.actionSheet.create({\n        header: '¿Desea agregar otro gasto ?',\n        buttons: [\n          {\n            text: 'Otro gasto',\n            icon: 'add-outline',\n            role: 'other',\n            handler: () => {\n              this.gastosConfirm.push(..._gastosDetalle);\n              this.fields.reset();\n              const formattedDate = this.today.toJSON().split('T')[0];\n              this.fields.patchValue({ fecha: formattedDate });\n            },\n          },\n          {\n            text: 'Salir',\n            icon: 'checkmark',\n            role: 'confirm',\n            handler: () => {\n              this.gastosConfirm.push(..._gastosDetalle);\n              this.confirm(this.gastosConfirm);\n            },\n          },\n        ],\n      });\n      await actionSheet.present();\n    }\n\n    removeInputField(i: number): void {\n      const control = <FormArray>this.fields.controls['conceptos'];\n      control.removeAt(i);\n    }\n\n    addNewInputField(): void {\n      const control = <FormArray>this.fields.controls['conceptos'];\n      let sumMonto: number = 0;\n      control.controls.forEach((data: any) => {\n        sumMonto += data.value.monto;\n      });\n      control.push(this.frmConceptos());\n      this.updateMountConcepto(sumMonto);\n    }\n\n    updateMountConcepto(_monto: number = 0) {\n      const monto = this.fields.value.monto;\n      const newMonto = monto - _monto;\n      const control = <FormArray>this.fields.controls['conceptos'];\n      const formattedDate = this.today.toJSON().split('T')[0];\n      control.at(control.length -1 ).patchValue({\n        mes: formattedDate,\n        monto: newMonto\n      });\n    }\n\n\n  meesageToast(_message: string) {\n    this.toastCtrl.presentToast(_message, 'top');\n  }\n\n  close() {\n    this.modalCtrl.dismiss(null, 'cancel');\n  }\n  confirm(gasto : any) {\n    this.modalCtrl.dismiss(gasto, 'confirm');\n  }\n}\n","<ion-header>\n\t<ion-toolbar>\n\t\t<ion-title>Agregar Gastos</ion-title>\n\t\t<ion-buttons slot=\"start\">\n\t\t\t<ion-button ion-button (click)=\"close()\">\n\t\t\t\t<ion-icon name=\"close\"></ion-icon>\n\t\t\t</ion-button>\n\t\t</ion-buttons>\n\t</ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n\t<form [formGroup]=\"fields\" (ngSubmit)=\"onSave(fields.value)\">\n\t\t<ion-item>\n\t\t\t<ion-select label=\"Categoria\" labelPlacement=\"floating\" interface=\"popover\" (ionChange)=\"onChange($event)\"\n\t\t\t\tformControlName=\"categoria\" placeholder=\"Seleciona categoria\">\n\t\t\t\t<ion-select-option *ngFor=\"let categoria of categorias\" [value]=\"categoria\">{{ categoria.Nombre\n\t\t\t\t\t}}\n\t\t\t\t</ion-select-option>\n\t\t\t</ion-select>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-input label=\"Concepto\" labelPlacement=\"floating\" type=\"text\" formControlName=\"nombre\"\n\t\t\t\tplaceholder=\"Nombre o Concepto\">\n\t\t\t</ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<!-- <ion-datetime displayFormat=\"DD/MMM/YYYY\" formControlName=\"fecha\"></ion-datetime> -->\n\t\t\t<ion-input label=\"Fecha\" labelPlacement=\"floating\" id=\"fecha\" type=\"date\" formControlName=\"fecha\"></ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-input label=\"Monto\" labelPlacement=\"floating\" type=\"number\" formControlName=\"monto\" (ionChange)=\"onChangeMonto($event, 0)\"></ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-textarea label=\"Comentario\" labelPlacement=\"floating\" formControlName=\"comentario\" placeholder=\"comentario\">\n\t\t\t</ion-textarea>\n\t\t</ion-item>\n\t\t<!-- Detail -->\n\t\t<div formArrayName=\"conceptos\" margin-bottom>\n\t\t\t<section *ngFor=\"let control of conceptoForm.controls; let i = index\" [formGroupName]=\"i\" >\n\t\t\t\t<ion-item-group>\n\t\t\t\t\t<ion-item-divider color=\"light\">Conceptos #{{ i + 1 }}</ion-item-divider>\n\t\t\t\t\t<ion-item>\n\t\t\t\t\t\t<ion-input label=\"Mes:\" labelPlacement=\"floating\" id=\"mes\" type=\"date\" maxlength=\"50\" formControlName=\"mes\"></ion-input>\n\t\t\t\t\t</ion-item>\n\t\t\t\t\t<ion-item>\n\t\t\t\t\t\t<ion-input label=\"Monto:\" labelPlacement=\"floating\"  id=\"monto\" type=\"number\" maxlength=\"50\" formControlName=\"monto\"></ion-input>\n\t\t\t\t\t</ion-item>\n          <ion-item>\n          <ion-item>\n            <ion-textarea label=\"Comentario\" labelPlacement=\"floating\" formControlName=\"comentario\" placeholder=\"comentario\">\n            </ion-textarea>\n          </ion-item>\n        </ion-item>\n\t\t\t\t\t<!-- Allow generated input field to be removed -->\n\t\t\t\t\t<ion-button size=\"small\" fill=\"clear\" color=\"danger\"\t*ngIf=\"conceptoForm.length > 1\"\n\t\t\t\t\t\t(click)=\"removeInputField(i)\">\n\t\t\t\t\t\t<ion-icon slot=\"start\" name=\"close\"></ion-icon>\n\t\t\t\t\t\teliminar\n\t\t\t\t\t</ion-button>\n\t\t\t\t</ion-item-group>\n\t\t\t</section>\n\t\t</div>\n\t\t<!-- Allow new input field to be generated/added -->\n\t\t<ion-button size=\"small\" fill=\"clear\" color=\"primary\"\n\t\t\t(click)=\"addNewInputField()\">\n\t\t\t<ion-icon slot=\"start\" name=\"add\"></ion-icon>\n\t\t\tnuevo concepto\n\t\t\t</ion-button>\n\t\t<ion-button type=\"submit\" expand=\"block\" [disabled]=\"!fields.valid\">Agregar</ion-button>\n\t</form>\n</ion-content>\n"],"names":["Validators","LoadingUtil","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","categoria_r1","ɵɵadvance","ɵɵtextInterpolate1","Nombre","ɵɵlistener","AddGastosComponent_section_21_ion_button_11_Template_ion_button_click_0_listener","ɵɵrestoreView","_r2","i_r3","ɵɵnextContext","index","ctx_r3","ɵɵresetView","removeInputField","ɵɵelement","ɵɵtemplate","AddGastosComponent_section_21_ion_button_11_Template","conceptoForm","length","AddGastosComponent","constructor","modalCtrl","actionSheet","formBuilder","service","loadingCtrl","toastCtrl","gasto","gastoDetalle","gastoDetalles","conceptos","categorias","date","Date","today","getTime","getTimezoneOffset","gastosConfirm","fields","group","categoria","required","nombre","fecha","monto","comentario","array","frmConceptos","mes","get","logForm","console","log","value","ngOnInit","getSpreadSheetId","then","initCategorias","formattedDate","toJSON","split","patchValue","showing","getCategoriaDef","subscribe","resp","dismiss","onChange","event","_categoria","detail","find","data","PersonaServicio","onChangeMonto","i","_monto","control","controls","newMonto","at","_comentario","onSave","_gasto","_this","_asyncToGenerator","create","header","buttons","text","icon","handler","save","role","present","Fecha","toLocaleString","timeZone","fillEvent","next","meesageToast","calOther","error","err","Categoria","Monto","Comentario","forEach","push","_gastosDetalle","_this2","reset","confirm","removeAt","addNewInputField","sumMonto","updateMountConcepto","_message","presentToast","close","ɵɵdirectiveInject","i1","ModalController","ActionSheetController","i2","FormBuilder","i3","GastosService","LoadingController","i4","ToastUtil","selectors","standalone","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddGastosComponent_Template","rf","ctx","AddGastosComponent_Template_ion_button_click_5_listener","AddGastosComponent_Template_form_ngSubmit_8_listener","AddGastosComponent_Template_ion_select_ionChange_10_listener","$event","AddGastosComponent_ion_select_option_11_Template","AddGastosComponent_Template_ion_input_ionChange_17_listener","AddGastosComponent_section_21_Template","AddGastosComponent_Template_ion_button_click_22_listener","valid"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}