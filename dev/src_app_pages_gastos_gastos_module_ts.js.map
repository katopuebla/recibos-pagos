{"version":3,"file":"src_app_pages_gastos_gastos_module_ts.js","mappings":"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","sources":["./src/app/pages/gastos/gastos-routing.module.ts","./src/app/pages/gastos/gastos.module.ts","./src/app/pages/gastos/gastos.page.ts","./src/app/pages/gastos/gastos.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { GastosPage } from './gastos.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GastosPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class GastosPageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { GastosPage } from './gastos.page';\n\nimport { GastosPageRoutingModule } from './gastos-routing.module';\nimport { GroupByPipe } from 'src/app/pipes/group-by.pipe';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    GastosPageRoutingModule,\n    GroupByPipe\n  ],\n  declarations: [GastosPage]\n})\nexport class GastosPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  ModalController,\n  NavController\n} from '@ionic/angular';\nimport { AddGastosComponent } from '../../components/add-gastos/add-gastos.component';\nimport { GastosService } from '../../service/gastos.service';\nimport { LoadingUtil } from '../../utils/loadingUtil';\nimport { GastosDetalle } from '../../interface/gastos';\n\n@Component({\n  selector: 'app-gastos',\n  templateUrl: 'gastos.page.html',\n  styleUrls: ['gastos.page.scss'],\n  standalone: false,\n})\nexport class GastosPage implements OnInit {\n  items: GastosDetalle[] = [];\n  itemsBackup: GastosDetalle[] = [];\n  role: string = '';\n\n  constructor(\n    public modalCtrl: ModalController,\n    public navCtrl: NavController,\n    private service: GastosService,\n    private loadUtil: LoadingUtil\n  ) {\n  }\n\n  ngOnInit() {\n    this.service.getSpreadSheetId().then(() => this.getdata());\n    const user = localStorage.getItem('user');\n    this.role = user ? JSON.parse(user).ROLE : '';\n  }\n\n  doRefresh(event: CustomEvent) {\n    this.service.getFullDataDetail().subscribe((data: any[]) => {\n      this.items = [...data]; // Fuerza nueva referencia para refrescar la vista\n      this.itemsBackup = [...this.items];\n      (event.target as HTMLIonRefresherElement).complete();\n    });\n  }\n\n  async getdata() {\n    await this.service.getFullDataDetail().subscribe((data: GastosDetalle[]) => {\n      this.items = [...data]; // Fuerza nueva referencia para refrescar la vista\n      this.itemsBackup = [...this.items];\n      this.loadUtil.dismiss();\n    });\n    this.loadUtil.showing();\n  }\n\n  getItems(ev: any) {\n    // Reset items back to all of the items\n    // console.log(this.items);\n    this.items = this.itemsBackup;\n    // console.log(\"this.items\", this.items);\n    // set val to the value of the searchbar\n    const val = ev.target.value;\n    // if the value is an empty string don't filter the items\n    if (val && val.trim() != '') {\n      this.items = this.items.filter(item => {\n        return (\n          item.Categoria && item.Categoria.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\n          item.Nombre && item.Nombre.toLowerCase().indexOf(val.toLowerCase()) > -1\n        );\n      });\n    }\n  }\n\n  async openModal(detail: any) {\n    const modal = await this.modalCtrl.create({\n      component: AddGastosComponent,\n      componentProps: { detail : detail.detail }\n    });\n    modal.present();\n    const { data, role } = await modal.onWillDismiss();\n    if (role === 'confirm' && data && Array.isArray(data)) {\n      this.items.push(...data);\n      this.items = [...this.items]; // Fuerza refresco de la vista\n      this.itemsBackup = [...this.items];\n      this.service.gastosDetalle$.next(this.items); // Actualiza el observable compartido\n    }\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar color=\"primary\">\n    <ion-title>\n      Gastos\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n<ion-content class=\"ion-padding\">\n\t<!-- Botton Add -->\n\t<ion-fab slot=\"fixed\" vertical=\"bottom\" horizontal=\"end\" *ngIf=\"role != 'reader'\">\n\t\t<ion-fab-button (click)=\"openModal({new: 'Add'})\">\n\t\t  <ion-icon name=\"add\"></ion-icon>\n\t\t</ion-fab-button>\n\t  </ion-fab>\n\t<ion-list-header>\n\t\t<ion-searchbar (ionInput)=\"getItems($event)\"></ion-searchbar>\n\t</ion-list-header>\n\t<ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n\t\t<ion-refresher-content pullingIcon=\"arrow-dropdown\" pullingText=\"Pull to refresh\" refreshingSpinner=\"circles\"\n\t\t\trefreshingText=\"Refrescando...\"></ion-refresher-content>\n\t</ion-refresher>\n\t<ion-item-group *ngFor=\"let item of items | groupBy:'Fecha':'reverse'\">\n\t\t<ion-item-divider color=\"light\">\n\t\t\t{{  item.header | date: 'MMM.dd.yy' }}\n\t\t</ion-item-divider>\n\t\t<ion-item *ngFor=\"let detail of item.details\">\n\t\t\t<ion-label>\n\t\t\t\t<div ion-text color=\"primary\">\n\t\t\t\t\t<h3>{{ detail.Nombre }}</h3>\n\t\t\t\t</div>\n\t\t\t\t<p>{{ detail.Categoria }} -- {{ detail.Monto | currency }} </p>\n\t\t\t</ion-label>\n\t\t</ion-item>\n\t</ion-item-group>\n</ion-content>\n"],"names":["RouterModule","GastosPage","routes","path","component","GastosPageRoutingModule","forChild","imports","i1","exports","IonicModule","CommonModule","FormsModule","GroupByPipe","GastosPageModule","declarations","AddGastosComponent","i0","ɵɵelementStart","ɵɵlistener","GastosPage_ion_fab_5_Template_ion_fab_button_click_1_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","openModal","new","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","detail_r3","Nombre","ɵɵtextInterpolate2","Categoria","ɵɵpipeBind1","Monto","ɵɵtemplate","GastosPage_ion_item_group_10_ion_item_4_Template","ɵɵtextInterpolate1","ɵɵpipeBind2","item_r4","header","ɵɵproperty","details","constructor","modalCtrl","navCtrl","service","loadUtil","items","itemsBackup","role","ngOnInit","getSpreadSheetId","then","getdata","user","localStorage","getItem","JSON","parse","ROLE","doRefresh","event","getFullDataDetail","subscribe","data","target","complete","_this","_asyncToGenerator","dismiss","showing","getItems","ev","val","value","trim","filter","item","toLowerCase","indexOf","detail","_this2","modal","create","componentProps","present","onWillDismiss","Array","isArray","push","gastosDetalle$","next","ɵɵdirectiveInject","ModalController","NavController","i2","GastosService","i3","LoadingUtil","selectors","standalone","decls","vars","consts","template","GastosPage_Template","rf","ctx","GastosPage_ion_fab_5_Template","GastosPage_Template_ion_searchbar_ionInput_7_listener","$event","GastosPage_Template_ion_refresher_ionRefresh_8_listener","GastosPage_ion_item_group_10_Template","ɵɵpipeBind3"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}