{"version":3,"file":"default-src_app_components_add-gastos_add-gastos_component_ts.js","mappings":"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","sources":["./src/app/components/add-gastos/add-gastos.component.ts","./src/app/components/add-gastos/add-gastos.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  ModalController,\n  LoadingController,\n  ActionSheetController,\n} from '@ionic/angular';\nimport { CategoriaDef, Concepto, Gastos, GastosDetalle } from '../../interface/gastos';\nimport { GastosService } from '../../service/gastos.service';\nimport { LoadingUtil } from '../../utils/loadingUtil';\nimport { ToastUtil } from 'src/app/utils/toastUtil';\n\n@Component({\n  selector: 'app-add-gastos',\n  templateUrl: 'add-gastos.component.html',\n  styleUrls: ['add-gastos.component.css'],\n  standalone: false,\n})\nexport class AddGastosComponent extends LoadingUtil implements OnInit {\n  gasto: Gastos = {};\n  gastoDetalle: GastosDetalle = {};\n  gastoDetalles: GastosDetalle [] = [];\n  conceptos: Concepto[] = [];\n  categorias: CategoriaDef[] = [];\n  date = new Date(); // Or the date you'd like converted.\n  today = new Date(\n    this.date.getTime() - this.date.getTimezoneOffset() * 60000\n  );\n\n  public fields: FormGroup;\n\n  constructor(\n    public modalCtrl: ModalController,\n    private actionSheet: ActionSheetController,\n    private formBuilder: FormBuilder,\n    private service: GastosService,\n    loadingCtrl: LoadingController,\n    private toastCtrl: ToastUtil\n  ) {\n    super(loadingCtrl);\n    this.fields = this.formBuilder.group({\n      categoria: ['', Validators.required],\n      nombre: ['', Validators.required],\n      fecha: ['', Validators.required],\n      monto: ['', Validators.required],\n      comentario: [''],\n      conceptos: this.formBuilder.array([this.frmConceptos()])\n    });\n  }\n\n  frmConceptos(): FormGroup {\n    return this.formBuilder.group({\n      // concepto: ['', Validators.required],\n      mes: ['', Validators.required],\n      monto: ['', Validators.required]\n    });\n  }\n\n  get conceptoForm() {\n    return this.fields.get('conceptos') as FormArray;\n  }\n\n  logForm() {\n    console.log(this.fields.value);\n  }\n  ngOnInit() {\n    this.showing();\n    this.service.getSpreadSheetId().then(() => this.initCategorias());\n    const formattedDate = this.today.toJSON().split('T')[0];\n    this.fields.patchValue({ fecha: formattedDate });\n  }\n\n  initCategorias() {\n    this.service.getCategoriaDef().subscribe((resp: CategoriaDef[]) => {\n      this.categorias = resp || [];\n      this.dismiss();\n    });\n  }\n\n  onChange(event: CustomEvent) {\n    const _categoria: CategoriaDef = event.detail.value;\n    if (_categoria) {\n      let categoria: CategoriaDef;\n      categoria = this.categorias && this.categorias.find((data) => data.Nombre === _categoria.Nombre) || {} as CategoriaDef;\n      this.fields.patchValue({ nombre: categoria.PersonaServicio });\n    }\n  }\n\n    onChangeMonto(event: CustomEvent, i: number) {\n      const _monto: number = event.detail.value;\n      if (_monto) {\n        const control = <FormArray>this.fields.controls['conceptos'];\n        const newMonto = _monto - control.at(i).value.monto;\n        const formattedDate = this.today.toJSON().split('T')[0];\n        control.at(i).patchValue({\n          mes: formattedDate,\n          monto: _monto\n        });\n      }\n    }\n\n  async onSave(_gasto: any) {\n    const actionSheet = await this.actionSheet.create({\n      header: '¿Desea guardar el gasto?',\n      buttons: [\n        {\n          text: 'Guardar',\n          icon: 'save',\n          handler: () => {\n            this.save(_gasto);\n          },\n        },\n        {\n          text: 'Cancelar',\n          icon: 'close',\n          role: 'cancel',\n        },\n      ],\n  });\n    await actionSheet.present();\n}\n\n  save(_gasto: any) {\n    let fecha = new Date(this.gasto.Fecha || this.today);\n    this.gasto.Fecha = fecha.toLocaleString('es-MX', {\n      timeZone: 'America/Mexico_City'\n    });\n    this.fillEvent(_gasto);\n    this.service.save(this.gasto, this.gastoDetalles).subscribe({\n      next: (resp) => {\n        this.meesageToast('Se guardo exitosamente');\n        this.dismiss();\n        this.confirm(this.gastoDetalles);\n      },\n      error: (err) => {\n        this.meesageToast('No se pudo guardar el dato');\n        console.log('Error: ', err);\n        this.dismiss();\n      }\n    });\n    this.showing();\n  }\n\n    fillEvent(_gasto: any) {\n      // console.log(\"fillEvent\", _gasto);\n      this.gasto.Categoria = _gasto.categoria.Nombre;\n      this.gasto.Fecha = _gasto.fecha;\n      this.gasto.Nombre = _gasto.nombre;\n      this.gasto.Monto = _gasto.monto;\n      this.gasto.Commentario = _gasto.comentario;\n      // console.log(\"this.gastos\", this.gastos);\n      var conceptos = _gasto.conceptos;\n          this.gastoDetalles = [];\n          if (conceptos) {\n            conceptos.forEach((data: Concepto) => {\n            var detail: GastosDetalle = {};\n            detail.Categoria = _gasto.categoria.Nombre;\n            detail.Fecha = data.mes;\n            detail.Nombre = _gasto.nombre;\n            detail.Monto = data.monto;\n            detail.Commentario = _gasto.comentario;\n              //console.log(\"detail\", detail);\n              this.gastoDetalles.push(detail);\n            });\n          }\n    }\n\n    removeInputField(i: number): void {\n      const control = <FormArray>this.fields.controls['conceptos'];\n      control.removeAt(i);\n    }\n\n    addNewInputField(): void {\n      const control = <FormArray>this.fields.controls['conceptos'];\n      let sumMonto: number = 0;\n      control.controls.forEach((data: any) => {\n        sumMonto += data.value.monto;\n      });\n      control.push(this.frmConceptos());\n      this.updateMountConcepto(sumMonto);\n    }\n\n    updateMountConcepto(_monto: number = 0) {\n      const monto = this.fields.value.monto;\n      const newMonto = monto - _monto;\n      const control = <FormArray>this.fields.controls['conceptos'];\n      const formattedDate = this.today.toJSON().split('T')[0];\n      control.at(control.length -1 ).patchValue({\n        mes: formattedDate,\n        monto: newMonto\n      });\n    }\n\n\n  meesageToast(_message: string) {\n    this.toastCtrl.presentToast(_message, 'top');\n  }\n\n  close() {\n    this.modalCtrl.dismiss(null, 'cancel');\n  }\n  confirm(gasto : any) {\n    this.modalCtrl.dismiss(gasto, 'confirm');\n  }\n}\n","<ion-header>\n\t<ion-toolbar>\n\t\t<ion-title>Agregar Gastos</ion-title>\n\t\t<ion-buttons slot=\"start\">\n\t\t\t<ion-button ion-button (click)=\"close()\">\n\t\t\t\t<ion-icon name=\"close\"></ion-icon>\n\t\t\t</ion-button>\n\t\t</ion-buttons>\n\t</ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n\t<form [formGroup]=\"fields\" (ngSubmit)=\"onSave(fields.value)\">\n\t\t<ion-item>\n\t\t\t<ion-select label=\"Categoria\" labelPlacement=\"floating\" interface=\"popover\" (ionChange)=\"onChange($event)\"\n\t\t\t\tformControlName=\"categoria\" placeholder=\"Seleciona categoria\">\n\t\t\t\t<ion-select-option *ngFor=\"let categoria of categorias\" [value]=\"categoria\">{{ categoria.Nombre\n\t\t\t\t\t}}\n\t\t\t\t</ion-select-option>\n\t\t\t</ion-select>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-input label=\"Concepto\" labelPlacement=\"floating\" type=\"text\" formControlName=\"nombre\"\n\t\t\t\tplaceholder=\"Nombre o Concepto\">\n\t\t\t</ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<!-- <ion-datetime displayFormat=\"DD/MMM/YYYY\" formControlName=\"fecha\"></ion-datetime> -->\n\t\t\t<ion-input label=\"Fecha\" labelPlacement=\"floating\" id=\"fecha\" type=\"date\" formControlName=\"fecha\"></ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-input label=\"Monto\" labelPlacement=\"floating\" type=\"number\" formControlName=\"monto\" (ionChange)=\"onChangeMonto($event, 0)\"></ion-input>\n\t\t</ion-item>\n\t\t<ion-item>\n\t\t\t<ion-textarea label=\"Comentario\" labelPlacement=\"floating\" formControlName=\"comentario\" placeholder=\"comentario\">\n\t\t\t</ion-textarea>\n\t\t</ion-item>\n\t\t<!-- Detail -->\n\t\t<div formArrayName=\"conceptos\" margin-bottom>\n\t\t\t<section *ngFor=\"let control of conceptoForm.controls; let i = index\" [formGroupName]=\"i\" >\n\t\t\t\t<ion-item-group>\n\t\t\t\t\t<ion-item-divider color=\"light\">Conceptos #{{ i + 1 }}</ion-item-divider>\n\t\t\t\t\t<ion-item>\n\t\t\t\t\t\t<ion-input label=\"Mes:\" labelPlacement=\"floating\" id=\"mes\" type=\"date\" maxlength=\"50\" formControlName=\"mes\"></ion-input>\n\t\t\t\t\t</ion-item>\n\t\t\t\t\t<ion-item>\n\t\t\t\t\t\t<ion-input label=\"Monto:\" labelPlacement=\"floating\"  id=\"monto\" type=\"number\" maxlength=\"50\" formControlName=\"monto\"></ion-input>\n\t\t\t\t\t</ion-item>\n\t\t\t\t\t<!-- Allow generated input field to be removed -->\n\t\t\t\t\t<ion-button size=\"small\" fill=\"clear\" color=\"danger\"\t*ngIf=\"conceptoForm.length > 1\"\n\t\t\t\t\t\t(click)=\"removeInputField(i)\">\n\t\t\t\t\t\t<ion-icon slot=\"start\" name=\"close\"></ion-icon>\n\t\t\t\t\t\teliminar\n\t\t\t\t\t</ion-button>\n\t\t\t\t</ion-item-group>\n\t\t\t</section>\n\t\t</div>\n\t\t<!-- Allow new input field to be generated/added -->\n\t\t<ion-button size=\"small\" fill=\"clear\" color=\"primary\"\n\t\t\t(click)=\"addNewInputField()\">\n\t\t\t<ion-icon slot=\"start\" name=\"add\"></ion-icon>\n\t\t\tnuevo concepto\n\t\t\t</ion-button>\n\t\t<ion-button type=\"submit\" expand=\"block\" [disabled]=\"!fields.valid\">Agregar</ion-button>\n\t</form>\n</ion-content>\n"],"names":["Validators","LoadingUtil","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","categoria_r1","ɵɵadvance","ɵɵtextInterpolate1","Nombre","ɵɵlistener","AddGastosComponent_section_21_ion_button_8_Template_ion_button_click_0_listener","ɵɵrestoreView","_r2","i_r3","ɵɵnextContext","index","ctx_r3","ɵɵresetView","removeInputField","ɵɵelement","ɵɵtemplate","AddGastosComponent_section_21_ion_button_8_Template","conceptoForm","length","AddGastosComponent","constructor","modalCtrl","actionSheet","formBuilder","service","loadingCtrl","toastCtrl","gasto","gastoDetalle","gastoDetalles","conceptos","categorias","date","Date","today","getTime","getTimezoneOffset","fields","group","categoria","required","nombre","fecha","monto","comentario","array","frmConceptos","mes","get","logForm","console","log","value","ngOnInit","showing","getSpreadSheetId","then","initCategorias","formattedDate","toJSON","split","patchValue","getCategoriaDef","subscribe","resp","dismiss","onChange","event","_categoria","detail","find","data","PersonaServicio","onChangeMonto","i","_monto","control","controls","newMonto","at","onSave","_gasto","_this","_asyncToGenerator","create","header","buttons","text","icon","handler","save","role","present","Fecha","toLocaleString","timeZone","fillEvent","next","meesageToast","confirm","error","err","Categoria","Monto","Commentario","forEach","push","removeAt","addNewInputField","sumMonto","updateMountConcepto","_message","presentToast","close","ɵɵdirectiveInject","i1","ModalController","ActionSheetController","i2","FormBuilder","i3","GastosService","LoadingController","i4","ToastUtil","selectors","standalone","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddGastosComponent_Template","rf","ctx","AddGastosComponent_Template_ion_button_click_5_listener","AddGastosComponent_Template_form_ngSubmit_8_listener","AddGastosComponent_Template_ion_select_ionChange_10_listener","$event","AddGastosComponent_ion_select_option_11_Template","AddGastosComponent_Template_ion_input_ionChange_17_listener","AddGastosComponent_section_21_Template","AddGastosComponent_Template_ion_button_click_22_listener","valid"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}